/*global requirejs*/
requirejs(['./paths'], function (paths) {

    requirejs.config(paths);

    requirejs(['fx-c-c/start'], function (TableCreator) {

        var tableCreator = new TableCreator();

        var modelProva = {
            "metadata" : {
                "uid" : "CountrySTAT_215CPE015",

                "dsd" : {
                    "datasource" : "CountrySTAT",
                    "contextSystem" : "CountrySTAT",
                    "columns" : [
                        {
                            "id" : "Country",
                            "subject" : "geo",
                            "title" : { "EN" : "Country" },
                            "dataType" : "code",
                            "domain" : { "codes" : [ { "idCodeList" : "FAOSTAT_CountryCodes" } ] },
                            "values" : { "codes" : [
                                {   "idCodeList" : "FAOSTAT_CountryCodes",
                                    "codes" : [
                                        {"code" : "215"}
                                    ]
                                } ]
                            },
                            "key" : true
                        },
                        {
                            "id" : "Element",
                            "subject" : null,
                            "title" : { "EN" : "Element" },
                            "dataType" : "code",
                            "domain" : { "codes" : [ { "idCodeList" : "FAOSTAT_Fertilizer_Elements" } ] },
                            "values" : { "codes" : [
                                {   "idCodeList" : "FAOSTAT_Fertilizer_Elements",
                                    "codes" : [
                                        {"code" : "5622"}
                                    ]
                                } ]
                            },
                            "key" : true
                        },
                        {
                            "id" : "Year",
                            "subject" : "time",
                            "title" : { "EN" : "Year" },
                            "dataType" : "year",
                            "domain" : { "period" : { "from" : 2000, "to" : 2014 } },
                            "values" : { "timeList" : [ 2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014 ] },
                            "key" : true
                        },
                        {
                            "id" : "Item",
                            "subject" : "item",
                            "title" : { "EN" : "Item" },
                            "dataType" : "code",
                            "domain" : { "codes" : [ { "idCodeList" : "FAOSTAT_Pesticides" } ] },
                            "values" : { "codes" : [
                                {   "idCodeList" : "FAOSTAT_Pesticides",
                                    "codes" : [
                                        {"code" : "1418"},
                                        {"code" : "1416"},
                                        {"code" : "1419"},
                                        {"code" : "1417"}
                                    ]
                                } ]
                            },
                            "key" : true
                        },
                        {
                            "id" : "Value",
                            "subject" : "value",
                            "title" : { "EN" : "Value" },
                            "dataType" : "number"
                        }
                    ]
                }
            },

            "data" :
                [
                    ["215","5622",2000,"1418",1600786],
                    ["215","5622",2000,"1416",4584232],
                    ["215","5622",2000,"1419",499172],
                    ["215","5622",2000,"1417",1151844],
                    ["215","5622",2001,"1418",2631772],
                    ["215","5622",2001,"1416",5055905],
                    ["215","5622",2001,"1419",815947],
                    ["215","5622",2001,"1417",1578815],
                    ["215","5622",2002,"1418",2668153],
                    ["215","5622",2002,"1416",4036341],
                    ["215","5622",2002,"1419",845183],
                    ["215","5622",2002,"1417",897784],
                    ["215","5622",2003,"1418",2706814],
                    ["215","5622",2003,"1416",516960],
                    ["215","5622",2003,"1419",784020],
                    ["215","5622",2003,"1417",1762634],
                    ["215","5622",2008,"1419",2036075],
                    ["215","5622",2008,"1417",15405845],
                    ["215","5622",2008,"1418",7736486],
                    ["215","5622",2008,"1416",5744641],
                    ["215","5622",2009,"1419",1083781],
                    ["215","5622",2009,"1417",9796877],
                    ["215","5622",2009,"1418",8700711],
                    ["215","5622",2009,"1416",7287658],
                    ["215","5622",2010,"1419",1413221],
                    ["215","5622",2010,"1417",7724972],
                    ["215","5622",2010,"1418",11595755],
                    ["215","5622",2010,"1416",4324970],
                    ["215","5622",2011,"1419",1259749],
                    ["215","5622",2011,"1417",8203171],
                    ["215","5622",2011,"1418",11760886],
                    ["215","5622",2011,"1416",9194029],
                    ["215","5622",2004,"1417",2908976],
                    ["215","5622",2004,"1419",1036860],
                    ["215","5622",2004,"1416",295008],
                    ["215","5622",2004,"1418",2823708],
                    ["215","5622",2005,"1417",4520907],
                    ["215","5622",2005,"1419",371340],
                    ["215","5622",2005,"1416",612964],
                    ["215","5622",2005,"1418",2462509],
                    ["215","5622",2006,"1417",5181937],
                    ["215","5622",2006,"1419",760141],
                    ["215","5622",2006,"1416",612868],
                    ["215","5622",2006,"1418",3204457],
                    ["215","5622",2007,"1417",6713310],
                    ["215","5622",2007,"1419",832073],
                    ["215","5622",2007,"1416",5347234],
                    ["215","5622",2007,"1418",5054423],
                    ["215","5622",2013,"1418",14963905],
                    ["215","5622",2013,"1416",4890938],
                    ["215","5622",2013,"1419",1861238],
                    ["215","5622",2013,"1417",12585123],
                    ["215","5622",2012,"1418",14228657],
                    ["215","5622",2012,"1416",5388158],
                    ["215","5622",2012,"1419",1245859],
                    ["215","5622",2012,"1417",11787857]
                ]
        }

        $.get("http://faostat3.fao.org/d3s2/v2/msd/resources/uid/AFO_ProductionCapacities?dsd=true&full=true&order=time", function (model) {

            tableCreator.render({
                container: '.content',
                model: model
            });
        })
    });
});